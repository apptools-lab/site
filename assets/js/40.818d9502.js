(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{478:function(a,t,s){"use strict";s.r(t);var e=s(56),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("appworks 初始化物料项目时可以选择一些内置的模板，同样也可以使用/开发自定义的模板。")]),a._v(" "),s("h2",{attrs:{id:"已支持模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#已支持模板"}},[a._v("#")]),a._v(" 已支持模板")]),a._v(" "),s("p",[a._v("目前，基于 appworks 可以使用的物料模板列表如下：")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("模板 npm 包名")]),a._v(" "),s("th",[a._v("是否内置")]),a._v(" "),s("th",[a._v("说明")]),a._v(" "),s("th",[a._v("备注")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("@icedesign/ice-react-ts-material-template")]),a._v(" "),s("td",[a._v("是")]),a._v(" "),s("td",[a._v("React+TypeScript")]),a._v(" "),s("td")]),a._v(" "),s("tr",[s("td",[a._v("@icedesign/ice-react-material-template")]),a._v(" "),s("td",[a._v("是")]),a._v(" "),s("td",[a._v("React+JavaScript")]),a._v(" "),s("td")]),a._v(" "),s("tr",[s("td",[a._v("@icedesign/ice-vue-material-template")]),a._v(" "),s("td",[a._v("是")]),a._v(" "),s("td",[a._v("Vue")]),a._v(" "),s("td",[a._v("暂不支持业务组件")])]),a._v(" "),s("tr",[s("td",[a._v("@icedesign/rax-template")]),a._v(" "),s("td",[a._v("是")]),a._v(" "),s("td",[a._v("Rax+TypeScript")]),a._v(" "),s("td")]),a._v(" "),s("tr",[s("td",[a._v("@icedesign/template-rax-js")]),a._v(" "),s("td",[a._v("否")]),a._v(" "),s("td",[a._v("Rax+JavaScript")]),a._v(" "),s("td")]),a._v(" "),s("tr",[s("td",[a._v("@icedesign/material-chart-template")]),a._v(" "),s("td",[a._v("否")]),a._v(" "),s("td",[a._v("React+图表")]),a._v(" "),s("td",[a._v("仅支持业务组件开发")])])])]),a._v(" "),s("p",[a._v("对于 CLI init 时没有询问的模板，可以通过 "),s("code",[a._v("appworks init material @icedesign/material-chart-template")]),a._v(" 的方式自定义模板名称。")]),a._v(" "),s("h2",{attrs:{id:"开发自定义物料模板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发自定义物料模板"}},[a._v("#")]),a._v(" 开发自定义物料模板")]),a._v(" "),s("p",[a._v("当以上这些物料模版不满足开发者需求时，可以开发自定义的物料模版。"),s("strong",[a._v("但是我们非常不推荐开发者自定义模板")]),a._v("，因为这会带来非常严重的碎片化版本的问题，如果有此需求的话一定要跟飞冰团队沟通，一方面确认自定义的必要性，另一方面我们希望模板能统一维护与迭代，尽量将自定义模板贡献到"),s("a",{attrs:{href:"https://github.com/ice-lab/material-templates/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方模板列表"),s("OutboundLink")],1),a._v("里，我们非常欢迎社区共建。")]),a._v(" "),s("h3",{attrs:{id:"物料模版的目录结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#物料模版的目录结构"}},[a._v("#")]),a._v(" 物料模版的目录结构")]),a._v(" "),s("p",[a._v("一套物料包含组件、区块和项目四种不同类型的物料，因此物料模版的物料结构应该按以下规则设置：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n├── README.md       // 物料模版文档\n├── package.json\n└── template        // 模版目录\n    ├── block       // 区块模版\n    ├── component   // 组件模版\n    └── scaffold    // 项目模版\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("h3",{attrs:{id:"package-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[a._v("#")]),a._v(" package.json")]),a._v(" "),s("p",[a._v("物料模版的 "),s("code",[a._v("package.json")]),a._v(" 里包含一个新的字段 "),s("code",[a._v("materialConfig")]),a._v("，这里需要指定一个 "),s("code",[a._v("type")]),a._v(" 字段：")]),a._v(" "),s("ul",[s("li",[a._v("type: 字符串，指定当前物料模版的前端框架类型 eg: 'react', 'vue', 'angular'")])]),a._v(" "),s("h3",{attrs:{id:"模板文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模板文件"}},[a._v("#")]),a._v(" 模板文件")]),a._v(" "),s("p",[a._v("物料模版 "),s("code",[a._v("template/")]),a._v(" 目录下包含 "),s("code",[a._v("block")]),a._v("、"),s("code",[a._v("component")]),a._v("，"),s("code",[a._v("page")]),a._v(" 和 "),s("code",[a._v("scaffold")]),a._v(" 四个子目录，它们即物料的模版文件，appworks 获取到物料模版后，也是根据这四个文件生成对应的区块、组件和项目代码。")]),a._v(" "),s("h3",{attrs:{id:"模板语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模板语法"}},[a._v("#")]),a._v(" 模板语法")]),a._v(" "),s("p",[a._v("在 appworks 执行 "),s("code",[a._v("init")]),a._v(" 命令时，appworks 会根据用户输入生成初始代码。这是因为在物料模版中，我们使用了 "),s("a",{attrs:{href:"https://ejs.co/",target:"_blank",rel:"noopener noreferrer"}},[a._v("ejs"),s("OutboundLink")],1),a._v(" 语法将用户输入注入到模版中，再渲染生成初始代码。以官方 React 模版为例，以下是组件模版的模版代码：")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// https://github.com/alibaba/ice/blob/master/templates/ice-react-material-template/template/component/src/index.js")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" Component "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("default")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%=")]),a._v(" className "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Component")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" displayName "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'<%= className %>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("div className"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"<%= name %>"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("Hello "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%=")]),a._v(" className "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[a._v("appworks 下载物料模版后，会遍历模版文件，按 ejs 语法重新生成初始代码，这意味着开发者可以在模版的任意文件中使用 ejs 语法编写物料模版（markdown、js、scss etc）。")]),a._v(" "),s("p",[a._v("appworks 根据用户输入，提供了以下变量供物料模版开发者使用：")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("title")]),a._v("：用户输入的 title，一般用于 README 标题")]),a._v(" "),s("li",[s("code",[a._v("className")]),a._v("：首字母大写的驼峰式组件名，eg：ProfileCard")]),a._v(" "),s("li",[s("code",[a._v("name")]),a._v("：kebab case 模式的组件名称，eg：profile-card")]),a._v(" "),s("li",[s("code",[a._v("npmName")]),a._v("：scope + 物料名 + 组件名，eg：custom-material-profile-card")]),a._v(" "),s("li",[s("code",[a._v("description")]),a._v("：用户输入的描述")]),a._v(" "),s("li",[s("code",[a._v("version")]),a._v("：用户输入的版本号")]),a._v(" "),s("li",[s("code",[a._v("adaptor")]),a._v("：用户输入的 adaptor（true or false）")]),a._v(" "),s("li",[s("code",[a._v("category")]),a._v("：用户输入的分类")]),a._v(" "),s("li",[s("code",[a._v("registry")]),a._v("：npm 源地址")]),a._v(" "),s("li",[s("code",[a._v("materialConfig")]),a._v("：物料模版的 "),s("code",[a._v("package.json")]),a._v(" 中定义的配置")])]),a._v(" "),s("h3",{attrs:{id:"特殊文件名称约定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特殊文件名称约定"}},[a._v("#")]),a._v(" 特殊文件名称约定")]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("block")]),a._v("、"),s("code",[a._v("component")]),a._v("、"),s("code",[a._v("page")]),a._v(" 和 "),s("code",[a._v("scaffold")]),a._v(" 三个目录下，是没有 "),s("code",[a._v("package.json")]),a._v(" 的，但有一个 "),s("code",[a._v("_package.json")]),a._v(" 文件，这个 "),s("code",[a._v("_package.json")]),a._v(" 即物料的 "),s("code",[a._v("package.json")]),a._v(" 模版，在文件内部同样使用以上 ejs 语法。使用下划线前缀的主要目的是与 npm package.json 区分，以免安装时被 npm 解析。")]),a._v(" "),s("p",[s("code",[a._v("_gitignore")]),a._v(" 则在物料被使用时被解析为 "),s("code",[a._v(".gitignore")]),a._v(" 文件，在 appworks 中并不处理。")]),a._v(" "),s("h2",{attrs:{id:"如何使用物料模版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何使用物料模版"}},[a._v("#")]),a._v(" 如何使用物料模版")]),a._v(" "),s("p",[a._v("物料模版开发完成后，需要发布到 npm 之后才可使用。发布后，执行 init 命令时通过参数指定物料模版即可。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过 npm 包")]),a._v("\n$ appworks init material my-material-template\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过相对路径")]),a._v("\n$ appworks init material "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("/ice-chart-template\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);